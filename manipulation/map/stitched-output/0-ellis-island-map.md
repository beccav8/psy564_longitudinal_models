



This report was automatically generated with the R package **knitr**
(version 1.13).

# The purpose of this script is to create a data object (dto) which will hold all data and metadata.# Run the lines below to stitch a basic html output. knitr::stitch_rmd(
  script="./manipulation/map/0-ellis-island-map.R",
  output="./manipulation/map/stitched-output/0-ellis-island-map.md"
)## 
## 
## processing file: 0-ellis-island-map.Rmd
## Error in parse_block(g[-1], g[1], params.src): duplicate label 'load-sources'
# The above lines are executed only when the file is run in RStudio, !! NOT when an Rmd/Rnw file calls it !!##############################  Land on Ellis Island  ##############################rm(list=ls(all=TRUE))  #Clear the variables from previous runs.cat("\f") # clear console 
# Call `base::source()` on any repo file that defines functions needed below.  # Ideally, no real operations are performed in these sourced scripts. source("./scripts/common-functions.R") # used in multiple reports
# Attach packages so their functions don't need to be qualified when used# See more : http://r-pkgs.had.co.nz/namespace.html#search-pathlibrary(magrittr) # Pipeslibrary(ggplot2) # Graphs# Functions of these packages will need to be qualified when used# See more: http://r-pkgs.had.co.nz/namespace.html#search-pathrequireNamespace("tidyr") #  data manipulationrequireNamespace("dplyr") # f() names conflict with other packages (esp. base, stats, and plyr).requireNamespace("testit") # for asserting conditions meet expected patterns.## Loading required namespace: testit
# getwd()# setwd("C:/Users/Rebecca/Documents/GitHub/cognition-stress-activity")
# reach out to the curator for a dataset prepared for general consumptiondata_path_input  <- "../MAP/data-unshared/derived/ds0_raw.rds"# point to the local metadata to be used for this project (specific consumption)metadata_path_input <- "./data/shared/meta/meta-data-map.csv" 
# load data objectsunitData <- readRDS(data_path_input) metaData <- read.csv(metadata_path_input, stringsAsFactors=F, header=T)names(unitData)##   [1] "id"                    "study"                
##   [3] "scaled_to.x"           "agreeableness"        
##   [5] "conscientiousness"     "extraversion"         
##   [7] "neo_altruism"          "neo_conscientiousness"
##   [9] "neo_trust"             "openness"             
##  [11] "anxiety_10items"       "neuroticism_12"       
##  [13] "neuroticism_6"         "age_bl"               
##  [15] "age_death"             "died"                 
##  [17] "educ"                  "msex"                 
##  [19] "race"                  "spanish"              
##  [21] "apoe_genotype"         "ldai_bl"              
##  [23] "q3smo_bl"              "q4smo_bl"             
##  [25] "smoke_bl"              "smoking"              
##  [27] "fu_year"               "scaled_to.y"          
##  [29] "cesdsum"               "r_depres"             
##  [31] "intrusion"             "neglifeevents"        
##  [33] "negsocexchange"        "nohelp"               
##  [35] "panas"                 "perceivedstress"      
##  [37] "rejection"             "unsympathetic"        
##  [39] "dcfdx"                 "dementia"             
##  [41] "r_stroke"              "cogn_ep"              
##  [43] "cogn_global"           "cogn_po"              
##  [45] "cogn_ps"               "cogn_se"              
##  [47] "cogn_wo"               "cts_bname"            
##  [49] "cts_catflu"            "cts_db"               
##  [51] "cts_delay"             "cts_df"               
##  [53] "cts_doperf"            "cts_ebdr"             
##  [55] "cts_ebmt"              "cts_idea"             
##  [57] "cts_lopair"            "cts_mmse30"           
##  [59] "cts_nccrtd"            "cts_pmat"             
##  [61] "cts_read_nart"         "cts_read_wrat"        
##  [63] "cts_sdmt"              "cts_story"            
##  [65] "cts_wli"               "cts_wlii"             
##  [67] "cts_wliii"             "age_at_visit"         
##  [69] "iadlsum"               "katzsum"              
##  [71] "rosbscl"               "rosbsum"              
##  [73] "vision"                "visionlog"            
##  [75] "fev"                   "mep"                  
##  [77] "mip"                   "pvc"                  
##  [79] "bun"                   "ca"                   
##  [81] "chlstrl"               "cl"                   
##  [83] "co2"                   "crn"                  
##  [85] "fasting"               "glucose"              
##  [87] "hba1c"                 "hdlchlstrl"           
##  [89] "hdlratio"              "k"                    
##  [91] "ldlchlstrl"            "na"                   
##  [93] "alcohol_g"             "bmi"                  
##  [95] "htm"                   "phys5itemsum"         
##  [97] "wtkg"                  "bp11"                 
##  [99] "bp2"                   "bp3"                  
## [101] "bp31"                  "hypertension_cum"     
## [103] "dm_cum"                "thyroid_cum"          
## [105] "chf_cum"               "claudication_cum"     
## [107] "heart_cum"             "stroke_cum"           
## [109] "vasc_3dis_sum"         "vasc_4dis_sum"        
## [111] "vasc_risks_sum"        "gait_speed"           
## [113] "gripavg"

# inspect loaded data objects (using basic demographic variables )ds <- unitData # assing aliaslength(unique(ds$id)) # there are this many of subjects## [1] 3477
t <- table(ds[,"fu_year"], ds[,"died"]); t[t==0]<-".";t##     
##      0    1   
##   0  2590 1489
##   1  2204 1318
##   2  1859 1206
##   3  1497 1055
##   4  1371 934 
##   5  1217 799 
##   6  1154 700 
##   7  1095 589 
##   8  922  461 
##   9  625  366 
##   10 489  298 
##   11 368  230 
##   12 286  167 
##   13 254  135 
##   14 186  101 
##   15 154  76  
##   16 138  44  
##   17 116  27  
##   18 99   19  
##   19 49   3   
##   20 17   .
t <- table(ds[,"msex"], ds[,"race"], useNA = "always"); t[t==0]<-".";t##       
##        1     2    3  6  <NA>
##   0    13981 5191 53 59 6   
##   1    5728  1642 14 25 9   
##   <NA> .     .    .  .  .
t <- table(ds[,"educ"], ds[,"race"]); t[t==0]<-".";t##     
##      1    2    3  6 
##   0  4    4    .  . 
##   2  8    .    .  . 
##   3  7    2    8  . 
##   4  20   3    .  . 
##   5  24   12   .  . 
##   6  82   31   .  . 
##   7  54   .    7  . 
##   8  181  79   18 . 
##   9  102  55   .  . 
##   10 193  158  .  19
##   11 212  175  .  . 
##   12 2671 1276 1  19
##   13 888  434  .  6 
##   14 1261 1083 .  . 
##   15 634  365  .  13
##   16 3730 1059 14 8 
##   17 692  118  .  . 
##   18 3652 962  5  8 
##   19 780  213  .  . 
##   20 2025 386  14 . 
##   21 1175 137  .  10
##   22 485  96   .  . 
##   23 208  22   .  . 
##   24 288  60   .  1 
##   25 128  14   .  . 
##   26 51   11   .  . 
##   27 37   .    .  . 
##   28 35   .    .  . 
##   29 .    10   .  . 
##   30 47   42   .  .

dto <- list()# the first element of data transfer object contains unit datadto[["unitData"]] <- unitData# the second element of data transfer object contains meta datadto[["metaData"]] <-  metaData# verify and glimpsedto[["unitData"]] %>% dplyr::glimpse()## Observations: 26,708
## Variables: 113
## $ id                    <int> 9121, 9121, 9121, 9121, 9121, 21073, 330...
## $ study                 <chr> "MAP ", "MAP ", "MAP ", "MAP ", "MAP ", ...
## $ scaled_to.x           <chr> "MAP ", "MAP ", "MAP ", "MAP ", "MAP ", ...
## $ agreeableness         <int> NA, NA, NA, NA, NA, 32, NA, NA, NA, NA, ...
## $ conscientiousness     <int> 35, 35, 35, 35, 35, 34, NA, NA, NA, NA, ...
## $ extraversion          <int> 34, 34, 34, 34, 34, 34, 30, 30, 32, 32, ...
## $ neo_altruism          <int> 27, 27, 27, 27, 27, NA, NA, NA, NA, NA, ...
## $ neo_conscientiousness <int> 35, 35, 35, 35, 35, NA, NA, NA, NA, NA, ...
## $ neo_trust             <int> 25, 25, 25, 25, 25, NA, NA, NA, NA, NA, ...
## $ openness              <int> NA, NA, NA, NA, NA, 29, NA, NA, NA, NA, ...
## $ anxiety_10items       <dbl> 0, 0, 0, 0, 0, 3, NA, NA, 0, 0, 0, 0, 0,...
## $ neuroticism_12        <int> 9, 9, 9, 9, 9, 23, NA, NA, 16, 16, 16, 1...
## $ neuroticism_6         <int> 8, 8, 8, 8, 8, 11, 1, 1, 14, 14, 14, 14,...
## $ age_bl                <dbl> 79.96988, 79.96988, 79.96988, 79.96988, ...
## $ age_death             <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
## $ died                  <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ educ                  <int> 12, 12, 12, 12, 12, 22, 14, 14, 8, 8, 8,...
## $ msex                  <int> 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1...
## $ race                  <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...
## $ spanish               <int> 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1...
## $ apoe_genotype         <int> 34, 34, 34, 34, 34, NA, 33, 33, 33, 33, ...
## $ ldai_bl               <dbl> 0.2, 0.2, 0.2, 0.2, 0.2, 0.0, 0.0, 0.0, ...
## $ q3smo_bl              <int> 20, 20, 20, 20, 20, NA, NA, NA, NA, NA, ...
## $ q4smo_bl              <int> 31, 31, 31, 31, 31, NA, NA, NA, NA, NA, ...
## $ smoke_bl              <int> 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ smoking               <int> 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ fu_year               <int> 0, 1, 2, 3, 4, 0, 0, 1, 0, 2, 3, 4, 5, 6...
## $ scaled_to.y           <chr> "RMM", "RMM", "RMM", "RMM", "RMM", "RMM"...
## $ cesdsum               <int> 0, 0, 0, 0, 0, 0, 1, 2, 6, 1, 3, 1, 0, 2...
## $ r_depres              <int> 4, 4, 4, 4, NA, 4, 4, 4, 3, 4, 4, 4, 4, ...
## $ intrusion             <dbl> NA, NA, NA, 2.000000, NA, NA, NA, NA, NA...
## $ neglifeevents         <int> NA, NA, NA, 4, NA, NA, NA, NA, NA, NA, N...
## $ negsocexchange        <dbl> NA, NA, NA, 1.833333, NA, NA, NA, NA, NA...
## $ nohelp                <dbl> NA, NA, NA, 1.666667, NA, NA, NA, NA, NA...
## $ panas                 <dbl> NA, NA, NA, 1.1, NA, NA, NA, NA, NA, NA,...
## $ perceivedstress       <dbl> NA, NA, NA, 2.5, NA, NA, NA, NA, NA, NA,...
## $ rejection             <dbl> NA, NA, NA, 1.666667, NA, NA, NA, NA, NA...
## $ unsympathetic         <dbl> NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, N...
## $ dcfdx                 <int> 1, 1, 1, 1, NA, 4, 1, NA, 1, 2, 1, 1, 1,...
## $ dementia              <int> 0, 0, 0, 0, NA, 1, 0, NA, 0, 0, 0, 0, 0,...
## $ r_stroke              <int> NA, NA, 4, 4, NA, 4, 4, NA, 4, NA, 4, NA...
## $ cogn_ep               <dbl> 0.073389978, -0.002270858, -0.533467384,...
## $ cogn_global           <dbl> 0.25733204, 0.33752780, 0.06659408, 0.40...
## $ cogn_po               <dbl> 0.299150420, 0.893261567, 0.893261567, 0...
## $ cogn_ps               <dbl> 0.48563724, 0.88320592, 0.78368706, 0.59...
## $ cogn_se               <dbl> 0.780455216, 0.938832669, 1.202795091, 1...
## $ cogn_wo               <dbl> 0.157699036, -0.004753158, -0.319903508,...
## $ cts_bname             <int> 15, 15, 15, 15, 15, 10, 12, NA, 15, 15, ...
## $ cts_catflu            <int> 40, 43, 48, 49, 45, 20, 20, NA, 31, 27, ...
## $ cts_db                <int> 6, 6, 4, 4, 4, 4, 6, NA, 2, 4, 3, 5, 3, ...
## $ cts_delay             <int> 10, 7, 7, 10, 10, 0, 4, NA, 14, 11, 11, ...
## $ cts_df                <int> 9, 8, 9, 9, 9, 11, 8, NA, 6, 8, 9, 9, 10...
## $ cts_doperf            <int> 7, 7, 6, 7, 8, 1, 7, NA, 7, 4, 5, 5, 6, ...
## $ cts_ebdr              <int> 9, 9, 6, 8, 9, 0, 10, NA, 8, 0, 8, 7, 10...
## $ cts_ebmt              <int> 7, 9, 6, 12, 9, 6, 11, NA, 8, 10, 7, 9, ...
## $ cts_idea              <int> 8, 8, 8, 8, 8, 7, 8, NA, 7, 8, 8, 8, 8, ...
## $ cts_lopair            <int> 9, 14, 14, 15, 15, 5, 5, NA, 10, 12, 8, ...
## $ cts_mmse30            <dbl> 29, 29, 30, 30, 29, 18, 29, NA, 27, 25, ...
## $ cts_nccrtd            <int> 24, 34, 26, 27, 28, 7, 19, NA, 16, 19, 1...
## $ cts_pmat              <int> 13, 12, 12, 11, 11, 9, 10, NA, 11, 7, 13...
## $ cts_read_nart         <int> 9, 8, 9, 8, 9, 9, 10, NA, 5, 5, 3, 3, 3,...
## $ cts_read_wrat         <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
## $ cts_sdmt              <int> 49, 43, 53, 47, 51, 19, 39, NA, 24, 21, ...
## $ cts_story             <int> 10, 9, 7, 8, 11, 2, 8, NA, 14, 14, 10, 9...
## $ cts_wli               <int> 19, 18, 17, 18, 16, 16, 20, NA, 16, 13, ...
## $ cts_wlii              <int> 7, 6, 5, 6, 5, 0, 5, NA, 5, 5, 3, 5, 5, ...
## $ cts_wliii             <int> 10, 10, 10, 10, 10, 4, 10, NA, 10, 10, 1...
## $ age_at_visit          <dbl> 79.96988, 81.08145, 81.61259, 82.59548, ...
## $ iadlsum               <int> 0, 0, 0, 0, 0, 0, 5, 3, 0, 0, 0, 0, 0, 0...
## $ katzsum               <int> 6, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0...
## $ rosbscl               <int> 1, 3, 3, 3, 3, 3, 0, 0, 3, 3, 3, 3, 2, 3...
## $ rosbsum               <int> 2, 0, 0, 0, 0, 0, 3, 3, 0, 0, 0, 0, 1, 0...
## $ vision                <int> 1, 1, 1, 2, 2, 1, 1, 4, 1, 2, 1, NA, 2, ...
## $ visionlog             <dbl> 0.3, 0.3, 0.3, 0.4, 0.4, 0.3, 0.3, 0.7, ...
## $ fev                   <dbl> 1.650, 1.280, 1.655, NA, 1.525, NA, 1.11...
## $ mep                   <dbl> 39.5, 33.5, 43.0, NA, 39.0, NA, 84.0, NA...
## $ mip                   <dbl> 32.5, 36.5, 35.0, NA, 41.5, NA, 73.5, NA...
## $ pvc                   <dbl> 2.285, 1.285, 1.690, NA, 1.940, NA, 1.51...
## $ bun                   <int> 13, NA, 13, 13, 14, 33, 32, 35, 14, 12, ...
## $ ca                    <dbl> 9.5, NA, 9.4, 9.4, 9.2, 10.0, 9.2, 8.8, ...
## $ chlstrl               <int> 235, NA, 205, 230, 210, 188, 201, 197, 1...
## $ cl                    <int> 96, NA, 102, 93, 99, 102, 103, 103, 102,...
## $ co2                   <int> 24, NA, 24, 25, 25, 22, 22, 25, 23, 20, ...
## $ crn                   <dbl> 0.85, NA, 0.98, 0.89, 0.82, 1.01, 1.30, ...
## $ fasting               <int> 2, NA, 2, 2, 2, 2, 3, 3, 3, 2, 1, NA, 3,...
## $ glucose               <int> 92, NA, 77, 85, 92, 94, 180, 153, 170, 2...
## $ hba1c                 <dbl> 5.6, NA, 5.5, 5.5, 6.1, 5.8, NA, NA, NA,...
## $ hdlchlstrl            <int> 79, NA, 76, 79, 69, 99, 50, 51, 30, 37, ...
## $ hdlratio              <dbl> 3.0, NA, 2.7, 2.9, 3.0, 1.9, 4.0, 3.9, 4...
## $ k                     <dbl> 5.0, NA, 4.2, 4.3, 4.5, 4.3, 4.8, 4.6, 4...
## $ ldlchlstrl            <int> 133, NA, 112, 134, 119, 60, 107, 99, NA,...
## $ na                    <int> 136, NA, 139, 130, 136, 139, 139, 140, 1...
## $ alcohol_g             <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
## $ bmi                   <dbl> 26.83177, 27.61514, 26.97526, 26.40132, ...
## $ htm                   <dbl> 1.778004, 1.752604, 1.778004, 1.778004, ...
## $ phys5itemsum          <dbl> 1.7500000, 4.0416667, 0.6250000, 0.45833...
## $ wtkg                  <dbl> 84.8232, 84.8232, 85.2768, 83.4624, 84.3...
## $ bp11                  <chr> "159/090", "145/090", "160/095", "147/09...
## $ bp2                   <chr> "159/090", "150/084", "160/088", "149/09...
## $ bp3                   <int> 1, 1, NA, 1, NA, NA, 1, 1, 1, 1, 1, 1, 1...
## $ bp31                  <chr> "157/082", "109/077", "151/082", "138/08...
## $ hypertension_cum      <int> 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1...
## $ dm_cum                <int> 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1...
## $ thyroid_cum           <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ chf_cum               <int> 0, 0, 0, 0, 0, NA, 0, 1, 0, 0, 0, 0, 0, ...
## $ claudication_cum      <int> 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1...
## $ heart_cum             <int> 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0...
## $ stroke_cum            <int> NA, NA, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vasc_3dis_sum         <dbl> 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1...
## $ vasc_4dis_sum         <dbl> 0, 0, 0, 0, 0, NA, 0, 1, 1, 1, 1, 1, 1, ...
## $ vasc_risks_sum        <dbl> 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2, 2, 2, 2...
## $ gait_speed            <dbl> 0.4393514, NA, NA, 0.4876800, 0.3483429,...
## $ gripavg               <dbl> 41.00, 41.00, 35.50, NA, 25.75, 21.50, 5...
dto[["metaData"]] %>% dplyr::glimpse()## Observations: 113
## Variables: 9
## $ name          <chr> "id", "study", "scaled_to.x", "agreeableness", "...
## $ label         <chr> NA, NA, NA, "NEO agreeableness-ROS", "Conscienti...
## $ type          <chr> "design", "design", "design", "personality", "pe...
## $ name_new      <chr> "id", "study", "scaled_to.x", "agreeableness", "...
## $ construct     <chr> "id", "", "", "", "", "", "", "", "", "", "", ""...
## $ self_reported <lgl> FALSE, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ longitudinal  <lgl> FALSE, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...
## $ unit          <chr> "person", "", "", "", "", "", "", "", "", "", ""...
## $ include       <lgl> TRUE, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA...

meta_data <- dto[["metaData"]] %>%
  dplyr::filter(include == TRUE) %>%
  # dplyr::select(name, name_new, type, label, construct) %>%
  dplyr::arrange(type, construct, name)knitr::kable(meta_data)

|name            |label                                                                                       |type          |name_new          |construct              |self_reported |longitudinal |unit                                                  |include |
|:---------------|:-------------------------------------------------------------------------------------------|:-------------|:-----------------|:----------------------|:-------------|:------------|:-----------------------------------------------------|:-------|
|chlstrl         |Cholesterol                                                                                 |clinical      |cholesterol       |allostatic_load        |FALSE         |TRUE         |blood level; mg/dl                                    |TRUE    |
|crn             |Creatinine                                                                                  |clinical      |creatine          |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|glucose         |Glucose                                                                                     |clinical      |glucose           |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|hba1c           |Hemoglobin A1c                                                                              |clinical      |hemoglobin        |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|hdlchlstrl      |HDL cholesterol                                                                             |clinical      |hdl               |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|hdlratio        |HDL ratio                                                                                   |clinical      |hdlratio          |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|ldlchlstrl      |LDL cholesterol                                                                             |clinical      |ldl               |allostatic_load        |FALSE         |TRUE         |blood level                                           |TRUE    |
|apoe_genotype   |ApoE genotype                                                                               |clinical      |apoe              |apoe                   |FALSE         |FALSE        |scale                                                 |TRUE    |
|r_stroke        |Clinical stroke dx                                                                          |clinical      |r_stroke          |stroke                 |FALSE         |TRUE         |category                                              |TRUE    |
|cts_mmse30      |MMSE - 2014                                                                                 |cognitive     |mmse              |dementia               |TRUE          |TRUE         |0 to 30                                               |TRUE    |
|dementia        |Dementia diagnosis                                                                          |cognitive     |dementia          |dementia               |FALSE         |TRUE         |0, 1                                                  |TRUE    |
|cogn_ep         |Calculated domain score-episodic memory                                                     |cognitive     |cogn_ep           |episodic memory        |FALSE         |TRUE         |composite                                             |TRUE    |
|cogn_global     |Calculated domain score- Global                                                             |cognitive     |cogn_global       |global cognition       |FALSE         |TRUE         |composite                                             |TRUE    |
|cogn_po         |Calculated domain score - perceptual orientation                                            |cognitive     |cogn_po           |perceptual orientation |FALSE         |TRUE         |composite                                             |TRUE    |
|cogn_ps         |Calculated domain score - perceptual speed                                                  |cognitive     |cogn_ps           |perceptual speed       |FALSE         |TRUE         |composite                                             |TRUE    |
|cts_sdmt        |Symbol digit modalitities - 2014                                                            |cognitive     |symbol_digit_mod  |perceptual speed       |FALSE         |TRUE         |0 to 110                                              |TRUE    |
|cogn_se         |Calculated domain score - semantic memory                                                   |cognitive     |cogn_se           |semantic memory        |FALSE         |TRUE         |composite                                             |TRUE    |
|cts_bname       |Boston naming - 2014                                                                        |cognitive     |cts_bname         |semantic memory        |FALSE         |TRUE         |0 to 15                                               |TRUE    |
|cts_catflu      |Category fluency - 2014                                                                     |cognitive     |catfluency        |semantic memory        |FALSE         |TRUE         |0 to 75                                               |TRUE    |
|cogn_wo         |Calculated domain score - working memory                                                    |cognitive     |cogn_wo           |working memory         |FALSE         |TRUE         |composite                                             |TRUE    |
|cts_db          |Digits backwards - 2014                                                                     |cognitive     |digit_back        |working memory         |FALSE         |TRUE         |0 to 12                                               |TRUE    |
|cts_df          |Digits forwards - 2014                                                                      |cognitive     |digit_forward     |working memory         |FALSE         |TRUE         |0 to 12                                               |TRUE    |
|age_at_visit    |Age at cycle - fractional                                                                   |demographic   |age_at_visit      |age                    |FALSE         |TRUE         |year                                                  |TRUE    |
|age_bl          |Age at baseline                                                                             |demographic   |age_bl            |age                    |FALSE         |FALSE        |year                                                  |TRUE    |
|age_death       |Age at death                                                                                |demographic   |age_death         |age                    |FALSE         |FALSE        |year                                                  |TRUE    |
|died            |Indicator of death                                                                          |demographic   |died              |age                    |FALSE         |FALSE        |category                                              |TRUE    |
|educ            |Years of education                                                                          |demographic   |edu               |education              |TRUE          |FALSE        |years                                                 |TRUE    |
|race            |Participant's race                                                                          |demographic   |race              |race                   |TRUE          |FALSE        |category                                              |TRUE    |
|spanish         |Spanish/Hispanic origin                                                                     |demographic   |spanish           |race                   |TRUE          |FALSE        |category                                              |TRUE    |
|msex            |Gender                                                                                      |demographic   |female            |sex                    |FALSE         |FALSE        |category                                              |TRUE    |
|scaled_to.y     |No label found in codebook                                                                  |design        |scaled_to.y       |data_set               |FALSE         |TRUE         |category                                              |TRUE    |
|id              |NA                                                                                          |design        |id                |id                     |FALSE         |FALSE        |person                                                |TRUE    |
|fu_year         |Follow-up year                                                                              |design        |full_year         |time                   |FALSE         |TRUE         |time point                                            |TRUE    |
|bmi             |Body mass index                                                                             |physical      |bmi               |allostatic_load        |FALSE         |TRUE         |kg/msq                                                |TRUE    |
|iadlsum         |Instrumental activities of daily liviing                                                    |physical      |iadlsum           |physact                |TRUE          |TRUE         |scale                                                 |TRUE    |
|phys5itemsum    |Summary of physical activity
measure (in hours/ week spend in 5 different categories of PA) |physical      |physical_activity |physact                |TRUE          |TRUE         |scale                                                 |TRUE    |
|cesdsum         |CESD-Measure of depressive symptoms                                                         |psychological |cesdsum           |depression             |TRUE          |TRUE         |symptom                                               |TRUE    |
|r_depres        |Major depression dx-clinic rating                                                           |psychological |r_depres          |depression             |FALSE         |TRUE         |1-higly probably;2-probable;3-possible; 4-not present |TRUE    |
|neglifeevents   |Negative life events; higher values mean more NLE                                           |psychological |neglifeevents     |negative_life_events   |TRUE          |TRUE         |scale                                                 |TRUE    |
|perceivedstress |Perceived stress; higher values mean more perceived stress                                  |psychological |perceivedstress   |stress                 |TRUE          |TRUE         |scale                                                 |TRUE    |


# rename variablesd_rules <- dto[["metaData"]] %>%
  dplyr::filter(name %in% names(ds)) %>% 
  dplyr::select(name, name_new ) # leave only collumn, which values you wish to appendnames(ds) <- d_rules[,"name_new"]# keep only relevant variablesvariables_to_keep <- dto$metaData %>% 
  dplyr::filter(include==TRUE)variables_to_keep <- variables_to_keep$name_newds <- ds %>% 
  dplyr::select_(.dots = variables_to_keep)# transfer changes to dtodto[["unitData"]] <- ds
#the origional variable msex used the following values #1=male, 0=female table(ds$female, useNA="always") #7418 males ## 
##     0     1  <NA> 
## 19290  7418     0
ds$female <-!(ds$female==1)  #sex=TRUE if femaletable(ds$female, useNA="always") #7481 FALSE (i.e. males) ## 
## FALSE  TRUE  <NA> 
##  7418 19290     0
names## function (x)  .Primitive("names")
str(ds$female)##  logi [1:26708] TRUE TRUE TRUE TRUE TRUE TRUE ...

# Save as a compressed, binary R dataset.  # It's no longer readable with a text editor, but it saves metadata (eg, factor information).saveRDS(dto, file="./data/unshared/derived/map/dto.rds", compress="xz")
# the production of the dto object is now complete# we verify its structure and content:dto <- readRDS("./data/unshared/derived/map/dto.rds")names(dto)## [1] "unitData" "metaData"
# 1st element - unit(person) level datanames(dto[["unitData"]])##  [1] "id"                "age_bl"            "age_death"        
##  [4] "died"              "edu"               "female"           
##  [7] "race"              "spanish"           "apoe"             
## [10] "full_year"         "scaled_to.y"       "cesdsum"          
## [13] "r_depres"          "neglifeevents"     "perceivedstress"  
## [16] "dementia"          "r_stroke"          "cogn_ep"          
## [19] "cogn_global"       "cogn_po"           "cogn_ps"          
## [22] "cogn_se"           "cogn_wo"           "cts_bname"        
## [25] "catfluency"        "digit_back"        "digit_forward"    
## [28] "mmse"              "symbol_digit_mod"  "age_at_visit"     
## [31] "iadlsum"           "cholesterol"       "creatine"         
## [34] "glucose"           "hemoglobin"        "hdl"              
## [37] "hdlratio"          "ldl"               "bmi"              
## [40] "physical_activity"
# 2nd element - meta data, info about variablesnames(dto[["metaData"]])## [1] "name"          "label"         "type"          "name_new"     
## [5] "construct"     "self_reported" "longitudinal"  "unit"         
## [9] "include"


The R session information (including the OS info, R version and all
packages used):

sessionInfo()## R version 3.3.1 (2016-06-21)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 7 x64 (build 7601) Service Pack 1
## 
## locale:
## [1] LC_COLLATE=English_Canada.1252  LC_CTYPE=English_Canada.1252   
## [3] LC_MONETARY=English_Canada.1252 LC_NUMERIC=C                   
## [5] LC_TIME=English_Canada.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] psych_1.6.6     lattice_0.20-33 stringr_1.0.0   reshape2_1.4.1 
##  [5] dplyr_0.5.0     markdown_0.7.7  outliers_0.14   lmerTest_2.0-32
##  [9] lme4_1.1-12     Matrix_1.2-6    knitr_1.13      ggplot2_2.1.0  
## [13] magrittr_1.5   
## 
## loaded via a namespace (and not attached):
##  [1] splines_3.3.1       colorspace_1.2-6    htmltools_0.3.5    
##  [4] yaml_2.1.13         chron_2.3-47        survival_2.39-4    
##  [7] nloptr_1.0.4        foreign_0.8-66      DBI_0.4-1          
## [10] RColorBrewer_1.1-2  plyr_1.8.4          munsell_0.4.3      
## [13] gtable_0.2.0        coda_0.18-1         evaluate_0.9       
## [16] labeling_0.3        latticeExtra_0.6-28 parallel_3.3.1     
## [19] highr_0.6           Rcpp_0.12.5         acepack_1.3-3.3    
## [22] scales_0.4.0        arm_1.8-6           formatR_1.4        
## [25] Hmisc_3.17-4        abind_1.4-3         gridExtra_2.2.1    
## [28] mnormt_1.5-4        digest_0.6.9        stringi_1.1.1      
## [31] grid_3.3.1          tools_3.3.1         lazyeval_0.2.0     
## [34] tibble_1.1          dichromat_2.0-0     Formula_1.2-1      
## [37] cluster_2.0.4       tidyr_0.5.1         MASS_7.3-45        
## [40] data.table_1.9.6    assertthat_0.1      minqa_1.2.4        
## [43] rmarkdown_1.0       R6_2.1.2            rpart_4.1-10       
## [46] nnet_7.3-12         nlme_3.1-128
Sys.time()## [1] "2016-07-11 18:56:58 PDT"


